<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Grails Workshop</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <div class="slides">

            <section>
                <h1>Grails</h1>

                <h3>N00B to ninja in 3 hours</h3>
                <h4>[Introduction Workshop]</h4>
                <br/>

                <p>
                    <small><a href="http://brianjohnsen.dk">Brian Johnsen</a> / <a href="http://twitter.com/brianjohnsendk">@brianjohnsendk</a></small>
                </p>
            </section>


            <!------------------------------------------------------->
            <!---- WHOAMI ------------------------------------------->
            <!------------------------------------------------------->
            <section>
                <h2>Whoami</h2>
                <p>
                    <small>(whocares)</small>
                </p>
                <ul>
                    <li>Brian Johnsen, Gennemtænkt IT A/S</li>
                    <li>16+ years Java</li>
                    <li>10+ years Groovy & Grails</li>
                    <li>Your Friendly Neighborhood <strong>GR8Conf Organizer</strong></li>
                </ul>
            </section>


            <!------------------------------------------------------->
            <!---- INSTALL ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <section>

                    <h2>Ready?</h2>
                    <ol>
                        <li>Install SDKMAN</li>
                        <li><code>$ sdk install grails</code></li>
                        <li>Voilá</li>
                    </ol>
                    <br/>
                    <br/>
                    <pre>
                                <code data-trim>
$ grails --version

| Grails Version: 3.3.8
| Groovy Version: 2.4.15
| JVM Version: 1.8.0_181

                </code></pre>

                </section>
            </section>


            <!------------------------------------------------------->
            <!---- FRAMEWORK & ARCHITECTURE ------------------------->
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Full stack framework</h2>
                    <ul>
                        <li>ORM (GORM)</li>
                        <li>Dependency Injection and on-the-fly reloading (Spring Boot)</li>
                        <li>Internationalization support (i18n)</li>
                        <li>Runtime Container (Tomcat)</li>
                        <li>Testing Framework (Spock)</li>
                        <li>Plugin System</li>
                        <li>Command line tools</li>
                        <li>Powerful JSON view technology</li>
                        <li>and a bunch of other stuff…</li>
                    </ul>
                </section>


                <section>
                    <h2>Convention <br>over <br>Configuration</h2>
                </section>

                <section>
                    <h2>Anatomy</h2>
                    <small>
                        <ul>
                            <li><code>grails-app</code> - Top level directory for Groovy sources</li>
                            <ul>
                                <li><code>conf</code> - Configuration sources.</li>
                                <li><code>controllers</code> - Web/REST controllers - The C in MVC.</li>
                                <li><code>domain</code> - The application domain - The M in MVC.</li>
                                <li><code>i18n</code> - Support for internationalization (i18n).</li>
                                <li><code>init</code> - Bootstrap.</li>
                                <li><code>migrations</code> - Database migrations.</li>
                                <li><code>services</code> - The service layer.</li>
                                <li><code>views</code> - Grails Views (GSP/GSON) - The V in MVC.</li>
                            </ul>
                            <li><code>src</code> - Non Grails sources</li>
                            <ul>
                                <li><code>integrationTest</code> - Integrating tests (server startup)</li>
                                <li><code>main</code> - Main source</li>
                                <li><code>test</code> - Unit tests</li>
                            </ul>
                        </ul>
                    </small>

                </section>

            </section>


            <!------------------------------------------------------->
            <!---- CREATE THE APP ----------------------------------->
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>CLI</h2>
                    <pre><code data-trim>
    $ mkcd grailsdemo
    $ grails
                </code></pre>
                </section>


                <section>
                    <h2>Create the app</h2>

                    <pre><code data-trim>
    grails> create-app gul --profile rest-api
                </code></pre>
                    <p>Run it...</p>
                    <pre><code data-trim>
    $ ./gradlew bootRun
                </code></pre>
                    <pre><code data-trim>
    | Grails application running at http://localhost:8080
                </code></pre>

                    <p>Taste it...</p>

                    <pre><code data-trim>
    $ curl http://localhost:8080
                </code></pre>

                </section>

            </section>


            <!------------------------------------------------------->
            <!---- DOMAIN MODEL ------------------------------------->
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Domain</h2>
                    <p><code>/grails-app/domain/</code></p>
                    <br/>
                    <ul>
                        <li>The M in MVC</li>
                        <li>Mapped to the database</li>
                        <li><code>constraints</code> enforce database consistency</li>
                        <li>Dynamic finders</li>
                    </ul>
                </section>

                <section>
                    <pre><code data-trim>
    grails> create-domain-class Person
</code></pre>

                    <pre><code data-trim>
//grails-app/domain/Person.groovy
class Person {
    String name
    Integer age
    static constraints = {
        name blank: false
    	age min: 0
    }
}
</code></pre>
                </section>

                <section>
                    <h2>Save and validate</h2>
                    <small>
                        <code>constraints</code> are enforced on <code>save()</code> and <code>validate()</code>
                    </small>
                    <pre><code data-trim>
def person = new Person(age: 42, name: 'Douglas Adams')

person.validate() //only checks constraints
person.save() //saves the instance to the database
</code></pre>
                </section>

                <section>
                    <h2>Dynamic finders</h2>
                    <small>Finders are dynamically created for all properties</small>
                    <pre><code data-trim>
def everybody = Person.list() //Person.all
def theOne = Person.findByNameAndAge('Brian', 45)
def caseInsensitive = Person.findAllByNameIlike('graeme')
def underAge = Person.findAllByAgeLessThan(18)
def seniors = Person.findAllByAgeGreaterThanEquals(65)
</code></pre>
                </section>

                <section>
                    <h2>GORM Data Services</h2>
                    <small>Type safety, testing, performance</small>
                    <pre><code data-trim>
@Service(Person)
interface PersonService {
    Person get(Serializable id)
    List&lt;Person&gt; list(Map args)
    Long count()
    void delete(Serializable id)
    Person save(Person person)
}
</code></pre>
                </section>

            </section>


            <!------------------------------------------------------->
            <!---- TESTING ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Testing</h2>
                    <p><code>src/test/unit/</code></p>
                    <br/>
                    <ul>
                        <li>The easiest way to execute code!</li>
                        <li>Spock Specifications</li>
                        <li>Deeply integrated in Grails</li>
                        <li>Creating any artifact creates a corresponding test</li>
                        <pre><code data-trim>
| Created grails-app/domain/Person.groovy
| Created src/test/groovy/PersonSpec.groovy
</code></pre>
                    </ul>

                </section>


                <!--<section>-->
                <!--<h2>Example</h2>-->
                <!--<pre><code data-trim>-->
                <!--//src/test/unit/PersonSpec.groovy-->
                <!--class PersonSpec extends Specification-->
                <!--implements DomainUnitTest&lt;Person&gt; {-->
                <!--void "age should be more than 0"() {-->
                <!--when:-->
                <!--def person = new Person(age: age, name: 'joe')-->

                <!--then:-->
                <!--person.validate() == valid-->

                <!--where:-->
                <!--age	| valid-->
                <!--0	| true-->
                <!--41	| true-->
                <!-- -1	| false-->
                <!--}-->
                <!--}-->
                <!--</code></pre>-->
                <!--</section>-->


            </section>


            <!------------------------------------------------------->
            <!---- CONTROLLERS ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Controlllers</h2>
                    <p><code>/grails-app/controllers/</code></p>
                    <br/>
                    <ul>
                        <li>The C in MVC</li>
                        <li>Data binding</li>
                        <li>Delegating to business logic</li>
                        <li>Automatic content negotiation</li>
                        <li>Database console (/dbconsole)</li>

                    </ul>
                </section>


                <section>
                    <h2>Generate controller</h2>
                    <p>
                    <pre><code data-trim>$ grails generate-controller Person</code></pre>
                    </p>

                    <p>
                    <pre><code data-trim>$ ./gradlew bootRun</code></pre>
                    </p>
                </section>


                <section>
                    <h2>Data binding</h2>
                    <ul>
                        <li>Action argument<br>
                            <code>def update(Person person) {...}</code>
                        </li>
                        <li>Injected properties<br>
                            <code>session</code>,
                            <code>params</code>,
                            <code>request</code>,
                            <code>response</code>
                        </li>
                    </ul>
                </section>

            </section>


            <!------------------------------------------------------->
            <!---- VIEW ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Views</h2>
                    <p><code>/grails-app/views/</code></p>
                    <br/>
                    <ul>
                        <li>The V in MVC</li>
                        <li>JSON Views (GSON)</li>
                    </ul>
                </section>

                <section>
                    <h2>Generate views</h2>
                    <p>
                    <pre><code data-trim>$ grails generate-all Person --force</code></pre>
                    </p>
                </section>


            </section>


            <!------------------------------------------------------->
            <!---- SERVICES ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <section>
                    <h2>Services</h2>
                    <p><code>/grails-app/services/</code></p>
                    <br/>
                    <ul>
                        <li>Dependency injection</li>
                        <li>Should contain <strong>all</strong> business logic</li>
                        <li>Transactional</li>
                    </ul>
                </section>

                <section>
                    <h2>Create service</h2>
                    <p>
                    <pre><code data-trim>$ grails create-service Person</code></pre>
                    </p>
                </section>

            </section>


            <!------------------------------------------------------->
            <!---- PLUGINS ------------------------------------------>
            <!------------------------------------------------------->
            <section>
                <h2>Plugins</h2>
                <p><code>http://plugins.grails.org/</code></p>
                <br/>
                <ul>
                    <li>Build Test Data</li>
                    <li>Mail / GreenMail</li>
                    <li>Audit-Logging</li>
                    <li>Quartz</li>
                    <li>CXF (SOAP)</li>
                    <li>and it goes on and on...</li>
                </ul>
            </section>


        </div>
    </div><!--end slides-->
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
        history: true,
        dependencies: [
            {src: 'plugin/markdown/marked.js'},
            {src: 'plugin/markdown/markdown.js'},
            {src: 'plugin/notes/notes.js', async: true},
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }
        ]
    });
</script>
</body>
</html>
